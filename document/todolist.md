<!--
 * @Author: cwx
 * @Description: 
 * @Date: 2022-06-07 17:58:39
 * @LastEditTime: 2022-07-14 16:06:47
 * @FilePath: \ReportSystem_Demo\document\todolist.md
-->

#todo
6.7 本周todo
补充tbs病例相关的字段,pdf模板,
补充诊断界面的标注图显示,切片显示
界面上区分TBS病例和组织病例(隐藏大体所见)
专家查看报告时 不用打开iframe 提供下载
病例列表 做一个快捷分类显示 根据病例状态
补充复数切片的逻辑(优先级中低)

6.17/18将完成系统的demo
完整流程包括:
医生上传病例 - 选择切片 - 选择专家 - 专家诊断填报告 - 专家生成报告(或转诊) - 医生查看报告 

6.14 更新进度
区分tbs和常规病例(√)
pdf分文件夹(√)
医生端查看报告(√)
诊断中查看报告用图(√)
标签图 缩略图(√)

6.15 更新进度
区分tbs和常规病例(√)
电子签名(√)
诊断中查看报告用图(√)

6.17 更新需求
电子签名二值化去掉背景(√)  补充:有些图片imread失败,待排查
修复pdf生成时,报告表单数据未更新(√)
pdf生成的时候做保护 检查各项属性(√)
没有标注的切片 不能在新建病例时被选中

6.23 更新需求
划分组织 同个组织的医生专家才进行资源共享(√) 补充:同组织医生可互看病例,专家只能看到指派给自己的病例(未做转诊)
根据角色加载menu.json(√)
根据医院生成报告html模板(优先级低)
病例筛选(√)

6.24 更新需求
增加组织管理界面(CRUD)
1.新建用户时只能选取现有的组织(√)
2.不同组织有不同的报告标题
3.用户可自定义报告标题 (自定义标题优先级比组织标题高)

6.27 
1.内网穿透服务 守护进程需要守护客户端(√)
2.切片各种图像可能需要存储在服务器本地,否则得设计 内网穿透更新时 各种url更新的功能
实现:获取各种切片的url时,裁剪掉host和port,运行时再加上内网穿透设置或者localhost(√)

7.7 更新问题
部署在新电脑时,puppeteer组件需要chromium,这是pkg未能打包的内容(已解决,需要在根目录添加chrome-win文件夹,并在config指定chrome.exe路径)
发现致命问题 slideCenter接口打开切片,在iframe添加的标注无法同步到sc,重启后才同步(已解决:更新slideCenter版本到22.4.15)

7.10 更新需求
1.在线版api
2.每个用户可自定义报告标题(√)(优先级高于组织报告标题),设置字数限制,不同字数采用不同字号
3.冰冻切片区分(预约时间)
4.标题设置需要根据不同报告模式来设置(根据caseType,存json)

优化点:
专家转诊功能
开放电子签名二值化阈值设置

7.12 更新需求
1.导航栏增加会诊报表功模块 会诊数据可视化

更新问题
内网下使用会议室电脑访问192.168.31.63:9000的切片,响应超时,与内网穿透带宽无关
因此暂时无法进行远程演示,演示只能在客户端与服务器处于同一台电脑的情况下进行

解决方案
服务器部署时,需要在防火墙设置里新建入站规则,开放9804端口

